################################################################################
# Makefile:
#    This is a makefile for maintaining the
#    '/root/PID_Project/SIM_cannon_analytic'
#    simulation directory. This makefile was automatically generated by trick-CP
#
################################################################################
# Creation:
#    Author: Trick Configuration Processor - trick-CP Version 17.4.dev
#    Date:   Tue Jan 22 22:29:16 2019
#
################################################################################

ifndef TRICK_VERBOSE_BUILD
    PRINT_COMPILE    = $(info $(call COLOR,Compiling)  $<)
    PRINT_EXE_LINK   = $(info $(call COLOR,Linking)    $@)
    PRINT_SIE        = $(info $(call COLOR,Writing)    $@)
endif

S_MAIN  = S_main_${TRICK_HOST_CPU}.exe
ifeq ($(MAKECMDGOALS), test)
    TRICK_HOST_CPU := $(shell $(TRICK_HOME)/bin/trick-gte TRICK_HOST_CPU)_test
    S_MAIN  = T_main_${TRICK_HOST_CPU}.exe
endif

# S_OBJECTS ====================================================================

S_OBJECTS = build/S_source.o

build/S_source.o: build/S_source.cpp | build/S_source.d
	$(PRINT_COMPILE)
	@echo $(TRICK_CPPC) $(TRICK_CXXFLAGS) $(TRICK_SYSTEM_CXXFLAGS) -MMD -MP -c -o $@ $< >> $(MAKE_OUT)
	$(ECHO_CMD)$(TRICK_CPPC) $(TRICK_CXXFLAGS) $(TRICK_SYSTEM_CXXFLAGS) -MMD -MP -c -o $@ $< 2>&1 | $(TEE) -a $(MAKE_OUT) ; exit $${PIPESTATUS[0]}

build/S_source.d: ;

-include build/S_source.d

# MODEL_OBJECTS ================================================================

MODEL_OBJECTS.c := \
    build/root/PID_Project/SIM_cannon_analytic/models/cannon/src/cannon_analytic.o \
    build/root/PID_Project/SIM_cannon_analytic/models/cannon/src/cannon_init.o \
    build/root/PID_Project/SIM_cannon_analytic/models/cannon/src/cannon_shutdown.o

MODEL_OBJECTS := ${MODEL_OBJECTS.c}

# We use .SECONDEXPANSION here to allow us to use automatic vairiables in the prerequisite list
# in order to add to each target an order-only dependency on its directory.
# See https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html
# and https://www.gnu.org/software/make/manual/html_node/Secondary-Expansion.html

.SECONDEXPANSION:

${MODEL_OBJECTS.c} : build/%.o : /%.c | build/%.d $$(dir $$@)
	$(PRINT_COMPILE)
	@echo $(TRICK_CC) $(TRICK_CFLAGS) $(TRICK_SYSTEM_CFLAGS) -I$(<D)/../include -MMD -MP -c -o $@ $< >> $(MAKE_OUT)
	$(ECHO_CMD)$(TRICK_CC) $(TRICK_CFLAGS) $(TRICK_SYSTEM_CFLAGS) -I$(<D)/../include -MMD -MP -c -o $@ $< 2>&1 | $(TEE) -a $(MAKE_OUT) ; exit $${PIPESTATUS[0]}

$(sort $(dir $(MODEL_OBJECTS))):
	@mkdir -p $@

$(MODEL_OBJECTS:.o=.d): ;

-include $(MODEL_OBJECTS:.o=.d)

LINK_LISTS += $(LD_FILELIST)build/model_link_list

# S_MAIN =======================================================================

READ_ONLY_LIBS =

all: $(S_MAIN) S_sie.resource

$(S_MAIN): $(TRICK_STATIC_LIB) $(S_OBJECTS) $(MODEL_OBJECTS)
	$(PRINT_EXE_LINK)
	@echo $(TRICK_CPPC) -o $@ $(TRICK_SYSTEM_LDFLAGS) $(S_OBJECTS) $(LINK_LISTS) $(TRICK_LDFLAGS) $(TRICK_USER_LINK_LIBS) $(READ_ONLY_LIBS) $(LD_WHOLE_ARCHIVE) $(TRICK_LIBS) $(LD_NO_WHOLE_ARCHIVE) $(TRICK_EXEC_LINK_LIBS) >> $(MAKE_OUT)
	$(ECHO_CMD)$(TRICK_CPPC) -o $@ $(TRICK_SYSTEM_LDFLAGS) $(S_OBJECTS) $(LINK_LISTS) $(TRICK_LDFLAGS) $(TRICK_USER_LINK_LIBS) $(READ_ONLY_LIBS) $(LD_WHOLE_ARCHIVE) $(TRICK_LIBS) $(LD_NO_WHOLE_ARCHIVE) $(TRICK_EXEC_LINK_LIBS) 2>&1 | $(TEE) -a $(MAKE_OUT) ; exit $${PIPESTATUS[0]}

# SIE ==========================================================================

sie: S_sie.resource

S_sie.resource: $(S_MAIN)
	$(PRINT_SIE)
	@echo ./$(S_MAIN) sie
	$(ECHO_CMD)./$(S_MAIN) sie 2>&1 | $(TEE) -a $(MAKE_OUT) ; exit $${PIPESTATUS[0]}
